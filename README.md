# P2HACKS2025 アピールシート

---

クイックスタート等、技術面に関するドキュメントは [PROJECT.md](./PROJECT.md) を参照してください。

---

## プロダクト名
リフレクト新世界(りふれくとしんせかい)


## コンセプト
日常のキラキラした思い出を、新世界として可視化することで振り返りやすく、生活に意味を与えるアプリ。

## 対象ユーザ
「先週何やってたっけ…」
友達とご飯に行ったり、外で面白い看板を見つけたり、日常に溢れているはずのキラキラした思い出。でもいつかはその記憶も薄れ、「何もしてないよ…」という虚無感に襲われます。
そんな虚無感を抱えていくのは嫌だ、日記を書いてみたいけど準備も面倒だし続けていける自信もない、そんな「なんとなく日常生活を消費している人」が対象です。

具体的なペルソナ
名前：藤原 颯斗（ふじわら はやと）
年齢：20
性別：男
職業：大学2年生（情報工学部）
学歴：国立大学在学中
家族構成：両親・姉（実家は福岡）
居住地：愛知県名古屋市（一人暮らし）

性格：
・おっとりしていてマイペース
・「まあいいか」で流されやすい
・将来のことを考えると漠然とした不安がある
・楽しいことは好きだが、自分から動くのは億劫
目標: 特に明確なものはない（IT系に進めればいいかな程度）
挑戦したいこと: 何か一つ「これをやった」と言えることを作りたい


ライフスタイル：
趣味：ゲーム（Apex、スプラトゥーン）、アニメ
余暇：YouTube、ゲーム、たまにサークル
人間関係：高校の友人3人とオンラインゲーム、大学の友人は5人程度
習慣：夜更かし→昼起き、課題は締切直前

デジタル環境：
SNS：X（Twitter）、Discord、LINE
好きなアプリ：YouTube、Twitch、Discord
情報源：YouTube、X、まとめサイト
端末：iPhone 13、自作ゲーミングPC

課題：
「日々を曖昧に消費していて、充実したという実感がない」

毎日授業に出て、バイトして、ゲームして寝る。
特に不満はないけど、「大学生活楽しんでる？」と聞かれると言葉に詰まる。
1週間前に何をしていたか思い出せない。
「何かしているはずなのに、何もしていない」という感覚がずっとある。
実際には友達とご飯に行ったり、面白い動画を見つけたり、小さな出来事はあったはず。
でもそれを「充実」としてカウントできず、振り返ると「何もなかった」になってしまう。
このまま卒業したら後悔しそうだけど、何を変えればいいかわからない。

## 利用の流れ
起動した段階であるのはまっさらな世界と新世界に住む人々の日常です。
ユーザーは何か残しておきたい出来事があったときに記録を書きます。これは日記のように長々書く必要はありません。
ユーザーが記録を出すと新世界の住人の発言が記録に影響を受けます。
そして次の日、その影響が新世界そのものに広がり、実際に可視化されます。
一週間の区切りで世界の変化は保存され、いつでも振り返ることができるようになります。



プロダクトを起動したり、ランディングした時やその後の流れを書きます。
手順書のようなものではなくてもよいですが、読んだらプロダクトの使い方がわかるものがよいです。
必要に応じて、プロダクトを知るまでの流れも書いてよいでしょう。

## 推しポイント
・新世界のビジュアル化で振り返りやすい
・世界の住人による発言で、受動的に思い出を振り返ることができる

SNS風UIでの発言による受動的な振り返り・新世界というビジュアルでの振り返りを組み合わせることで自分の日常をより良いものとして受け取り、生活を振り返った時の虚無感を無くし、充実した生活を実感することができます。

ここにはプロダクトの推しポイントを書きます。
なぜそのプロダクトはほかのプロダクトより優れているのでしょうか？他のプロダクトにはない特徴は何でしょうか？ほかでもないそのプロダクトによってユーザーはどのような嬉しさを得ますか？

## スクリーンショット(任意)
ここにはスクリーンショットを貼ります。そのままでもよいですし、画像を編集しておしゃれにしてもよいです(全くの捏造というのはしないでください)。GitHubのエディタに画像をドロップ&ドロップすると張り付きます。

## 開発体制

### 役割分担

ここには開発体制を書きます。誰が何をしましたか？役職名を付けるか、担当した領域（バックエンド、フロントエンド、デザイン、発表資料作成、など）を書いてください。一人が複数を兼任する場合もあるでしょう。

---

uiro(山﨑拓己)
・プロジェクトマネージャー
・レビュー
・フロントエンド（ReactNative）

こはぜ(川島与壱)
・テックリード（技術選定、レビュー、Codeowner）
・フロントエンド（ReactNative）
・バックエンド（DB設計、Hono）

wisteria(藤井優気)
・バックエンド（DB設計、Hono、cronワーカー）

もち(遠藤七佳)
・フロントエンド（ReactNative）
・デザイン
・スライド

いも(小野耕太)
・デザイン
・スライド
・登壇

### 開発における工夫した点
開発における工夫した点を書いてください。チーム開発における工夫、技術的な工夫、スケジュール管理の工夫など、どのようなことでもよいです。

---

#### レビュー体制
1 Issue = 1 PR とセルフマージ禁止を軸に、AI/CI も組み合わせて main を壊さない運用 を徹底しました。
- 1 Issue = 1 PR でタスクを細かく分割し、各自が完結できる粒度でアサインしました
- コードオーナー含めセルフマージを禁止し、第三者レビューを必須化しました
- 指摘には優先度バッジを付け、レビューが開発のボトルネック化するのを防止しました
- 人による動作確認に加え、AI チェックと CI（型/フォーマット）を組み合わせ、main を常に稼働可能な状態で維持しました

#### プロジェクト管理
Projects, 定例について書く

#### Claude Code 活用（開発効率と実装ブレの抑制）
Claude Code をチーム開発に組み込みやすい形に整備し、並列開発でも手戻りが起きにくい運用を行いました。
- Issue を細かく分割して並列で作業できるようにし、コンフリクトが起きにくい粒度・進め方で運用しました
- 各 appsとpackages に CLAUDE.md / RECIPES.md / README.md の3段階ドキュメントを整備し、AI 実装の前提・手順・仕様がブレないようにしました
- AI によるレビューを取り入れ、レビュー依頼後の修正対応の初速を上げました
各ドキュメントの詳細は[ドキュメントマップ](./PROJECT.md#ドキュメントマップ)をご確認ください。

#### 新世界生成AI機能の設計

複数のAIモデルを組み合わせた**マルチLLMワークフロー**を設計しました。

**ワークフロー設計**:
[日記投稿] → GPT-4.1（テキスト理解） → [シーン記述] → Gemini（画像生成） → [世界画像]

各AIの得意分野を活かし、処理を分担しています:

| 処理 | モデル | 選定理由 |
|------|--------|----------|
| シーン記述生成 | OpenAI GPT-4.1 | プロンプト遵守率が高く、制約付き出力が安定 |
| 画像生成 | Google Gemini | 画像編集のマルチモーダル処理に強い |
| AI投稿生成 | OpenAI GPT-4.1-nano | 軽量かつ高速なテキスト生成 |

**なぜ2段階か**: Geminiは画像生成能力は高いものの、複雑な制約を含むプロンプトへの遵守率が低く、単体では意図した画像を安定生成できませんでした。そこでGPTで制約に沿ったシーン記述を先に生成し、Geminiには単純化された指示のみを渡すことで、出力品質を大幅に改善しています 。

**プロンプト管理の工夫**:
- プロンプトをMarkdownファイルとして外部管理し、モデル設定は `llm-config.ts` で一元化
- 画像生成の安定化のため、シーン記述に制約ルール（FORBIDDEN項目）を設計
- ユーザー入力を含むプロンプトにはインジェクション対策を実装

詳細: [画像生成ワークフロー](./docs/image-generation-workflow.md)

## 開発技術

### 利用したプログラミング言語

- TypeScript

### 利用したフレームワーク・ライブラリ

**Webフロントエンド**
- Next.js/React
- Tailwind CSS
- react-hook-form
- HeroUI

**モバイルアプリ**
- React Native
- Expo
- HeroUI Native
- Uniwind
- React Native Reanimated
- react-hook-form
- OneSignal

**バックエンド**
- Hono
- Drizzle ORM
- @hono/zod-openapi
- Zod
- Supabase

**バッチ処理**
- Node.js
- node-cron
- Google Gemini API
- OpenAI
- Sharp

**データベース**
- Supabase（PostgreSQL）
- Drizzle ORM

**その他**
- Turborepo
- pnpm
- Biome
- Lefthook

### その他開発に使用したツール・サービス
- ここにはその他開発に使用したツールやサービスを書きます。
- 例: GitHub, Figma, Canva, ChatGPT など

---

- GitHub
- GitHub Projects
- Cloudflare Workers
- Cloudflare Hyperdrive
- Supabase
- Notion
- Figma
- ChatGPT
- Claude / Claude Code
- Gemini
